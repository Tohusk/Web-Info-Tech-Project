{{> header context='vendor' }}
<main>
	<h1 id="loginTitle">Update location of {{vanName}}</h1>
	<div class="signInContainer">
		<form method="post" action="/vendor/updateVan?_method=PUT">
            <input placeholder="current location" name='currentLocation' id='' value="" />
			<input placeholder="open (true/false)" name="open" id='open' value="" />
			<input class="loginButton" type="submit" value="Update">
		</form>
	</div>

	<input type="hidden" name="location" id="location" value="{{location}}"/>
    <form action="/vendor/location" method="POST" name="frm1">
		<input type="hidden" name="longitude" id="getlon" />
		<input type="hidden" name="latitude" id="getlat" />
    </form>

	<script>
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            } else {
                alert("No geolocation supported on this browser")
            }
        }

        function showPosition(position) {
            document.getElementById('getlat').value = position.coords.latitude;
            document.getElementById('getlon').value = position.coords.longitude;
            lon = document.getElementById('getlon').value;
            lat = document.getElementById('getlat').value;
            document.frm1.submit();
        }

        if (document.getElementById('location').value === "false") {
            getLocation()
        }

    </script>
</main>